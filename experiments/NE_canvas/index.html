<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>NE bills</title>
  <meta charset="utf-8">
</head>
<body>

  <button onclick="javascript:play()">Play</button><br>
  <canvas id="canvas" width="300" height="300"></canvas>
  <img src="https://solitaired.com/images/style-classic-2/heart_13.png" width="201" height="289" id="heart_13" style="display:none;">

  <script type="text/javascript">
    console.debug("hi");
    // Starting point: https://css-tricks.com/easing-animations-in-canvas/
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const canvasWidth = canvas.width;
    const canvasHeight = canvas.height;
    const billName = 'LB1';
    const billWidth = 4;
    const billPadding = 10;
    let billsCanvas = {};
  
    function getEase(currentProgress, start, distance, steps, power) {
      currentProgress /= steps/2;
      if (currentProgress < 1) {
        return (distance/2)*(Math.pow(currentProgress, power)) + start;
      } 
      currentProgress -= 2;
      return distance/2*(Math.pow(currentProgress,power)+2) + start;
    }
  
    function getX(params) {
      let distance = params.xTo - params.xFrom;
      let steps = params.frames;
      let currentProgress = params.frame;
      return getEase(currentProgress, params.xFrom, distance, steps, 3);
    }
  
    function getY(params) {
      let distance = params.yTo - params.yFrom;
      let steps = params.frames;
      let currentProgress = params.frame;
      return getEase(currentProgress, params.yFrom, distance, steps, 3);
    }
  
    function addBill(params) {
      let name = params.name;
      if (billsCanvas[name] === undefined) {
        billsCanvas[name] = document.createElement('canvas');
      }
      billsCanvas[name].width = billWidth;
      // billsCanvas[name].height = cardHeight;
  
      //let image = document.getElementById(name);
      let ctx = billsCanvas[name].getContext('2d');
      //billCtx.clearRect(0, 0, billWidth, billWidth);
      //billCtx.drawImage(image, 0, 0, cardWidth, cardHeight);
      ctx.lineWidth   = 2;
      ctx.strokeStyle = "red";
      ctx.strokeRect(10, 10, 100, 100);
      ctx.fillStyle = "blue";
      ctx.fillRect(10, 10, 100, 100);
      console.debug("you drew a rect");
      //context.drawImage(billsCanvas[name], getX(params), getY(params));
      if (params.frame < params.frames) {
        params.frame = params.frame + 1;
        window.requestAnimationFrame(drawCanvas);
        window.requestAnimationFrame(addBill.bind(null, params))
      }
    }
  
    function drawCanvas() {
      ctx.fillStyle = 'rgb(255,255,255)';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
    }
  
    function play() {
      console.debug("welcome to play");
      drawCanvas();  
      addBill({
        name: 'LB1',
        frame: 0,
        frames: 100,
        xFrom: billPadding,
        xTo: canvasWidth - billWidth - billPadding,
        yFrom: billPadding,
        yTo: canvasHeight - billWidth - billPadding
      });
    }
  
    window.onload = play;
  </script>
  
</body>
</html>